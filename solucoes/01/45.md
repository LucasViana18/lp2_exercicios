## Pergunta

45 - Considera a seguinte classe:

```cs
public abstract class NPC
{
    public float HP { get; protected set; }

    public NPC(float hp)
    {
        HP = hp;
    }

    public void PlayTurn()
    {
        if (FindEnemies())
        {
            AttackEnemies();
        }
        if (FindFood())
        {
            EatFood();
        }
        Move();
    }

    protected abstract bool FindFood();
    protected abstract bool FindEnemies();
    protected abstract void EatFood();
    protected abstract void AttackEnemies();

    protected virtual void Move()
    {
        Console.WriteLine(this.GetType() + " has moved!");
    }
}
```

Responde às seguintes questões:

1. É possível instanciar esta classe? Porquê?
2. É possível estender esta classe? Porquê?
3. Que métodos desta classe podem ser sobrepostos (_overridden_)? Porquê?
4. Que métodos desta classe **não** podem ser sobrepostos (_overridden_)?
   Porquê?
5. Cria pelo menos 3 subclasses concretas (não abstratas), representando
   diferentes NPCs num jogo, com lógicas concretas e específicas para cada um
   deles. Os métodos `EatFood()` e `AttackEnemies()` podem consistir apenas de
   `Console.WriteLines`.
6. Cria uma classe `Program` com um método `Main()` para testar as classes
   criadas no ponto anterior. Por exemplo, criar uma ou mais instâncias de cada
   classe, colocar as mesmas numa coleção de `NPC`, percorrer a coleção, e
   invocar o método `PlayTurn()` em cada uma delas. Repara que, além do
   construtor, só o método `PlayTurn()` pode ser invocado a partir de outras
   classes.
7. Identifica a presença de polimorfismo na solução que apresentaste no ponto
   anterior.
8. Desenha o diagrama UML da solução apresentada.

## Soluções

### Solução 1

1. Não. Esta classe é abstrata impossibilitando instanciá-la.
2. Sim. Esta classe pode e deve ser estendida por outras classes pois é abstrata.
3. Os seguintes métodos podem ser sobrepostos: `FindFood()`, `FindEnemies()`,
`EatFood()`, `AttackEnemies()` e `Move()`. Os quatro primeiros métodos 
mencionados são abstratos e o último método é `virtual`. Métodos abstratos e
`virtual` podem ser sobrepostos.
4. O método `PlayTurn()` não pode ser sobreposto pois não é `virtual` nem
abstrato.
5.  
```cs
public class Knight : NPC
{
    public Knight(float hp) : base(hp)
    {
    }

    protected override bool FindEnemies() => true;
    protected override bool FindFood() => false;
    
    protected override void AttackEnemies()
    {
        Console.WriteLine("A knight attacked an enemy!");
    }

    protected override void EatFood()
    {
    }

    protected override void Move()
    {
        base.Move();
    }
}

public class Farmer : NPC
{
    public Farmer(float hp) : base(hp)
    {
    }

    protected override bool FindEnemies() => false;
    protected override bool FindFood() => true;

    protected override void AttackEnemies()
    {
    }

    protected override void EatFood()
    {
        Console.WriteLine("A farmer ate some food.");
    }

    protected override void Move()
    {
        base.Move();
    }
}

public class Wanderer : NPC
{
    public Wanderer(float hp) : base(hp)
    {
    }

    protected override bool FindEnemies() => true;
    protected override bool FindFood() => true;

    protected override void AttackEnemies()
    {
        Console.WriteLine("A wanderer attacked an enemy!");
    }

    protected override void EatFood()
    {
        Console.WriteLine("A wanderer ate some food.");
    }

    protected override void Move()
    {
        base.Move();
    }
}
```

6. 
```cs
class Program
{
    static void Main(string[] args)
    {
        NPC knight = new Knight(200f);
        NPC farmer = new Farmer(100f);
        NPC wanderer = new Wanderer(150f);

        List<NPC> list= new List<NPC>(3);

        list.Add(knight);
        list.Add(farmer);
        list.Add(wanderer);

        foreach(NPC npc in list)
        {
            npc.PlayTurn();
        }
    }
}
```

7. Foi declarado três variáveis do tipo `NPC` e cada uma delas tem uma instância
diferente, `Knight`, `Farmer` e `Wanderer`. Isto é possível pois essas três
classes estendem `NPC`. Assim sendo, ao percorrer a lista contida por essas
instâncias, as mensagens impressas na consola são diferentes devido à
sobreposição dos métodos da super-classe.

8. 
![UML do exercício 45](45.png)

Por [Lucas Viana](https://github.com/LucasViana18)